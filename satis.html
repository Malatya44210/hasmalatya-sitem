<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TÃ¼m ÃœrÃ¼nler - Has Malatya PazarÄ±</title>
    <link rel="icon" type="image/jpeg" href="has-malatya-logo.jpg">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Arial', sans-serif; line-height: 1.6; color: #333; background-color: #f8f8f8; }
        header { background: linear-gradient(135deg, #d35400, #e67e22); color: white; padding: 1rem 0; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .header-container { max-width: 1200px; margin: 0 auto; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; flex-wrap: wrap; }
        .logo-container { display: flex; align-items: center; gap: 15px; }
        .logo-image { max-width: 120px; height: auto; border-radius: 8px; border: 2px solid white; }
        .logo-text { display: flex; flex-direction: column; }
        .logo-title { font-size: 1.4rem; font-weight: bold; }
        .logo-subtitle { font-size: 0.9rem; opacity: 0.9; }
        .header-actions { display: flex; align-items: center; gap: 15px; }
        .home-button { background: white; color: #d35400; border: none; padding: 10px 20px; border-radius: 25px; cursor: pointer; font-weight: bold; text-decoration: none; transition: all 0.3s ease; }
        .cart-icon { position: relative; font-size: 1.5rem; cursor: pointer; padding: 10px; background: rgba(255,255,255,0.2); border-radius: 50%; text-decoration: none; color: white; display: flex; align-items: center; justify-content: center; }
        .cart-count { position: absolute; top: -5px; right: -5px; background: #e74c3c; color: white; border-radius: 50%; width: 20px; height: 20px; font-size: 0.8rem; display: flex; align-items: center; justify-content: center; font-weight: bold; }
        .products-container { max-width: 1200px; margin: 2rem auto; padding: 0 20px; }
        .page-title { text-align: center; color: #d35400; margin-bottom: 1rem; font-size: 2.5rem; }
        .category-filters { display: flex; justify-content: center; gap: 10px; flex-wrap: wrap; margin-bottom: 2rem; }
        .filter-btn { background: #fff; color: #d35400; border: 2px solid #e67e22; padding: 8px 18px; border-radius: 20px; cursor: pointer; font-weight: bold; transition: all 0.3s ease; }
        .filter-btn:hover, .filter-btn.active { background: #d35400; color: white; border-color: #d35400; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; }
        .product-card { background: white; border-radius: 12px; padding: 1.2rem; box-shadow: 0 5px 15px rgba(0,0,0,0.1); text-align: center; display: flex; flex-direction: column; }
        .product-image { width: 100%; height: 180px; object-fit: cover; border-radius: 8px; margin-bottom: 1rem; }
        .product-title { color: #d35400; font-size: 1.2rem; font-weight: bold; }
        .product-description { color: #666; font-size: 0.85rem; min-height: 40px; flex-grow: 1; }
        .product-price { color: #27ae60; font-weight: bold; font-size: 1.3rem; margin: 1rem 0; }
        .add-to-cart { background: linear-gradient(135deg, #e67e22, #d35400); color: white; border: none; padding: 10px 20px; border-radius: 20px; cursor: pointer; font-weight: bold; }
        footer { background: #34495e; color: white; text-align: center; padding: 1.5rem 1rem; margin-top: 2rem; }
        @media (max-width: 600px) {
            .header-container { flex-direction: column; gap: 1rem; }
            .logo-container { flex-direction: column; text-align: center; }
            .header-actions { width: 100%; justify-content: space-around; }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo-container">
                <img src="has-malatya-logo.jpg" alt="Logo" class="logo-image">
                <div class="logo-text">
                    <div class="logo-title">HAS MALATYA PAZARI</div>
                    <div class="logo-subtitle">TÃ¼m ÃœrÃ¼nlerimiz</div>
                </div>
            </div>
            <div class="header-actions">
                <a href="index.html" class="home-button">Ana Sayfa</a>
                <a href="sepet.html" class="cart-icon">ðŸ›’<span class="cart-count" id="cartCount">0</span></a>
            </div>
        </div>
    </header>
    <main class="products-container">
        <h1 class="page-title">TÃ¼m ÃœrÃ¼nler</h1>
        <div class="category-filters" id="category-filters"></div>
        <div class="product-grid" id="product-grid"><p style="text-align: center;">YÃ¼kleniyor...</p></div>
    </main>
    <footer><p>Â© 2024 Has Malatya PazarÄ± Ä°Ã§erenkÃ¶y.</p></footer>

    <script>
        const GITHUB_USERNAME = "Malatya44210";
        const GITHUB_REPO = "hasmalatya-sitem";
        const CART_STORAGE_KEY = 'hasmalatya-sitem-cart';

        let allProducts = []; let allCategories = [];

        async function loadData() {
            const url = `https://cdn.jsdelivr.net/gh/${GITHUB_USERNAME}/${GITHUB_REPO}/products.json`;
            try {
                const response = await fetch(`${url}?v=${new Date().getTime()}`);
                if (!response.ok) throw new Error('Dosya bulunamadÄ±.');
                const data = await response.json();
                allProducts = data.products || []; allCategories = data.categories || [];
                renderCategories();
                renderProducts();
            } catch (error) {
                console.error('Veriler yÃ¼klenemedi:', error);
                document.getElementById('product-grid').innerHTML = '<p style="text-align:center; color:red;">ÃœrÃ¼nler yÃ¼klenirken bir hata oluÅŸtu.</p>';
            }
        }
        function renderCategories() {
            const filtersContainer = document.getElementById('category-filters');
            let buttonsHTML = '<button class="filter-btn active" onclick="filterProducts(\'all\', this)">TÃ¼mÃ¼</button>';
            allCategories.forEach(cat => { buttonsHTML += `<button class="filter-btn" onclick="filterProducts('${cat.slug}', this)">${cat.name}</button>`; });
            filtersContainer.innerHTML = buttonsHTML;
        }
        function renderProducts(filterCategory = 'all') {
            const productGrid = document.getElementById('product-grid');
            productGrid.innerHTML = '';
            const filteredProducts = filterCategory === 'all' ? allProducts : allProducts.filter(p => p.category === filterCategory);
            if (filteredProducts.length === 0) { productGrid.innerHTML = '<p style="text-align:center;">Bu kategoride Ã¼rÃ¼n bulunamadÄ±.</p>'; return; }
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                productCard.innerHTML = `<img src="${product.imageUrl}" alt="${product.title}" class="product-image"><h3>${product.title}</h3><p class="product-description">${product.description}</p><div class="product-price">â‚º${parseFloat(product.price).toFixed(2)}</div><button class="add-to-cart" onclick="addToCart('${product.title.replace(/'/g, "\\'")}', ${product.price}, '${product.id}')">Sepete Ekle</button>`;
                productGrid.appendChild(productCard);
            });
        }
        function filterProducts(category, btn) { document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active')); btn.classList.add('active'); renderProducts(category); }
        function getCart() { return localStorage.getItem(CART_STORAGE_KEY) ? JSON.parse(localStorage.getItem(CART_STORAGE_KEY)) : []; }
        function saveCart(cart) { localStorage.setItem(CART_STORAGE_KEY, JSON.stringify(cart)); updateCartCounter(); }
        function addToCart(productName, price, productId) {
            const cart = getCart();
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) { existingItem.quantity++; } else { cart.push({ id: productId, name: productName, price: price, quantity: 1 }); }
            saveCart(cart);
            showAddToCartAlert(productName);
        }
        function updateCartCounter() { const totalItems = getCart().reduce((total, item) => total + item.quantity, 0); document.getElementById('cartCount').textContent = totalItems; }
        function showAddToCartAlert(productName) {
            const alertDiv = document.createElement('div');
            alertDiv.style.cssText = `position: fixed; top: 20px; right: 20px; background: #27ae60; color: white; padding: 12px 18px; border-radius: 8px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); z-index: 1001; font-weight: bold; font-size: 0.9rem;`;
            alertDiv.textContent = 'âœ… ' + productName + ' sepete eklendi!';
            document.body.appendChild(alertDiv);
            setTimeout(() => { if (alertDiv.parentNode) { document.body.removeChild(alertDiv); } }, 3000);
        }
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            updateCartCounter();
        });
    </script>
</body>
</html>